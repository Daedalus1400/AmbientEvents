package com.daedalus.ambientevents;

import java.util.Random;

import org.apache.logging.log4j.Level;
import org.apache.logging.log4j.Logger;

import net.minecraft.entity.effect.EntityLightningBolt;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.potion.PotionEffect;
import net.minecraftforge.event.entity.player.PlayerWakeUpEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.PlayerEvent.PlayerLoggedInEvent;
import net.minecraftforge.fml.common.gameevent.PlayerEvent.PlayerLoggedOutEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent.ClientTickEvent;
import net.minecraftforge.fml.relauncher.Side;
import net.minecraftforge.fml.relauncher.SideOnly;

public class EventHandler {
	
	// Client side event handler
	
	public EntityPlayer player;

	protected int tick = -1;
	protected Random random = new Random();
	
	// Tracking Variables
	protected long lastSleep = 0;
	
	@SubscribeEvent
	public void onWakeUp(PlayerWakeUpEvent e) {
		lastSleep = player.world.getTotalWorldTime();
	}
	
	@SubscribeEvent
	public void onLogon(PlayerLoggedInEvent e) {
		player = e.player;
	}
	
	@SubscribeEvent
	public void onLogoff(PlayerLoggedOutEvent e) {

	}
	
	@SubscribeEvent
	public void onTick(ClientTickEvent e) {
		tick++;
		if (tick == 20) {
			if (player.posY > Config.yLevel && random.nextInt(Config.averageTime) == 0) {
				player.world.addWeatherEffect(new EntityLightningBolt(player.world, player.posX, player.posY, player.posZ, false));
			}
			tick = 0;
		}
	}
}
